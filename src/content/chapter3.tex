\chapter{Git}\label{cha:Git}
In diesem Kapitel wird auf die wesentlichsten Grundlagen und Befehle
beschrieben um mit Git Dateien zu Verwalten. Es wird als erstes mit einfachen
Befehlen ein Git-Repository erstellt und später am Beispiel dieses Repositorys
auf weitere Eigenschaften und fortgeschrittene Befehle eingegangen. Darüber
hinaus stellt der Author dieser Seminararbeit den Quellcode dieser Arbeit als
Git-Repository unter \cite{link:seminararbeit} zur Verfügung. Diese Repository
dient ebenso als Beispiel für Sachverhalte bei denen der gewünschte
Zusammenhang hiermit besser darzustellen ist.

\section{Grundlagen}\label{gitbasics}
In diesem Beispiel werden wir ein Repository \texttt{git-example} mit einem
Skript (\texttt{git-stats}) erstellen welches ein paar einfache Statistiken
über die Autoren eines git Repositorys erzeugt.

Alle Beispiele werden auf einer Linux Kommandozeile durchgeführt. Git ist für
alle gängigen Linux derivate verfügbar. Die Autoren von \cite[S.~12-14]{gitpro}
gehen auf weitere Detauls zur Installation von Git in anderen Versionen oder
auf anderen Betriebsystemen ein.

Die in den Beispielen eingesetzte Version von Git ist 2.15.0. Der folgende
Abschnitt basiert zum Zeil auf den Ausführungen der Autoren aus
\cite[S.22-57]{gitops}

\lstinputlisting[
  label=lst:gitversion,
  caption={Version von Git ausgeben},
  captionpos=none,
]{listings/git_version.lst}

\subsection{Konfiguration}\label{gitconfig}
Zu Beginn sollten zu erst einige grundlegende Konfigurationen vorgenommen
werden. So sollten, damit die Nachvollziehbarkeit gewährleistet ist, als erstes
immer der Name und Mailadresse des Benutzers konfiguriert werden. Auch ist die
farbliche Darstellung der Ausgaben durchaus hilfreich. Hier kann Git so
konfiguriert werden das die Farbausgabe automatisch unterdrückt wird, sollte
die Ausgabe in eine Datei umgeleitet werden.

\lstinputlisting[
  label=lst:gitinitconfig,
  caption={Erste Git Konfiguration},
  captionpos=none,
]{listings/git_init_config.lst}

Die eingestellten Optionen können ebenso direkt in der Datei
\texttt{\textasciitilde/.gitconfig} eingesehen und bearbeitet werden.

\subsection{Erstellen eines Repositorys}\label{startup}
Damit Dateien nun mit Git Versioniert werden können muss wie folgt ein ein (lokales)
\gls{repository} erstellt werden:

\lstinputlisting[
  label=lst:gitinit,
  caption={Repository anlegen},
  captionpos=none,
]{listings/git_init.lst}

Sollte das Verzeichnis \texttt{hello\_seminar.git} noch nicht existieren wird es
angelegt. Zusätzlich wird innerhalb von \texttt{hello\_seminar.git} noch ein
weiteres Verzeichnis \texttt{.git} angelegt in dem alle Daten ablegt werden die
Git zur weiteren Verwaltung des \glspl{repository} benötigt.

Um den Status des aktuell erzeugten \glspl{repository} auszugeben können wir
den Befehl \texttt{git status} verwenden:

\lstinputlisting[
  label=lst:gitstatus,
  caption={Status des Repositorys ausgeben},
  captionpos=none,
]{listings/git_status.lst}

Die von Git erzeugte Ausgabe macht darauf Aufmerksam das noch keine Commits
erzeugt wurde und das man nun neue Dateien erstellen und hinzufügen kann.

\subsection{Die ersten Commits}\label{first_commits}

Wir werden nun die ersten Dateien zu dem Repository hinzufügen. Dazu laden wir
zwei Dateien mit folgendem Befehl aus dem Internet herunter. Wer diese Dateien
nicht herunterladen möchte oder kann, darf selbstverständlich auch einfach
Dateien mit gleichem Namen und beliebigem Inhalt erstellen.

\lstinputlisting[
  label=lst:downloads,
  caption={Herunterladen der Beispieldateien},
  captionpos=none,
]{listings/downloads.lst}

Ab jetzt können die Dateien mit \gls{git} verwaltet werden. Ein erstes
Hinzufügen einer Datei mit dem Befehl \texttt{\$ git add LICENSE} führt zu
folgender status Ausgabe:

\lstinputlisting[
  label=lst:add_first_file,
  caption={Eine erste Datei hinzufügen},
  captionpos=none,
]{listings/add_first_file.lst}

Git macht nun darauf Aufmerksam das zum einen, eine neue Datei zum Commit
vorgemerkt ist und zum anderen das sich noch eine Datei im Verzeichnis befindet
die wir noch nicht mit Git verwalten. Hierbei ist anzumerken das Git auch die
vorgemerkte Datei noch nicht wirklich Versioniert. Dazu müssen wir zuerst einen
Commit erstellen. Darauf wie Git hier unterscheidet wird im späteren(REFERENZ?)
nochmal eingegangen.

Der erste Commit in dem angelegten Repository wird mit dem Befehl \texttt{git
commit} erzeugt. Eine Bemerkung zu dem Commit kann, je nach voreingestelltem
Systemeditor, nun eingegeben werden oder optional mit dem Parameter \texttt{-m}
direkt auf der Kommandozeile übergeben werden. In der Bemerkung wird die erste
Zeile als "Betreff" und getrennt mit einer Leerzeile, alle weiteren Zeilen als
ausführliche Beschreibung verwendet. Dieses Format ist i.d.R. in dem meisten
Versionskontrollsystemen üblich.

Darüber hinaus bietet es sich an bei dem Erstellen solcher Bemerkungen an sich
an gewisse Regeln zu Halten. Beispielsweise beschreiben Jez Humble und David
Farley in \cite[S.~37]{cd} ein übliches Szenario bei dem es durchaus Sinnvoll
kann, nicht nur zu wissen was der Author geändert hat sondern auch warum
und in welchem Kontext. Wenn nicht klar ist was sich der Autor sich bei
Änderungen gedacht hat oder Zusammenhäge nicht aus dem Commit hervorgehen, kann
ein gefundener und behobener Fehler vor dem Veröffentlichen einer
Softwareversion durch aus zu Folgefehlern führen. Solche Situationen enden
nicht selten darin das viele Stunden Arbeit investiert werden müssen diese zu
bereinigen.

Nachdem der erste Commit wie o.a. erzeugt wurde kann dieser nun mit \texttt{git
show}\ref{sec:gitshow} betrachtet werden:

\lstinputlisting[
  label=lst:git_show_first_commit.lst
  caption={Anzeige des ersten Commits},
  captionpos=none,
]{listings/git_show_first_commit.lst}

Hier können alle wichtigen Informationen eingesehen werden. Neben Zeitpunkt,
Author und Beschreibung auch die Commit-ID (Abschnitt \ref{sec:commit}). Die
weiteren Informationen werden in einem Format namens Unified-Diff dargestellt
auf welches hier nicht weiter eingegangen wird. Details zu dem Format stellen
die Autoren von \textit{GNU diffutils} unter \cite[S.~12-13]{paper:diffutils}
zur Verfügung.

Wir fügen nun die zweite Datei, wie oben bereits beschrieben, mit einem
\texttt{git add git-stats} hinzu. Anschliessend erzeugen wir einen weiteren
\gls{commit} mit \texttt{git commit -m "Add helper script to generate author
statistics."}.

Mit diesen beiden zuvor ausgeführten Commits haben wir nun eine, wenn auch
kurze, Historie erstellt. Um diese zu untersuchen dienen die Befehle
\texttt{git whatchanged}\footnote{Der Befehl \texttt{git whatchanged} stammt
aus frühen von Git und ist das gleiche wie \texttt{git log} mit einigen
Parametern um die Ausgabe entsprechend zu Formatieren.} oder \texttt{git log}.
Wir werden in Abschnitt \ref{sec:gitlog} weiter darauf eingehen aber für diesen
Fall ist ein \texttt{git whatchanged} ausreichend:

\lstinputlisting[
  label=lst:first_git_whatchanged.lst
  caption={Untersuchen der Historie},
  captionpos=none,
]{listings/first_git_whatchanged.lst}

Die Ausgabe wird im sogenannten \textit{raw} Format dargestellt. Es werden alle
Commits mit Informationen über den Autor, Commit-ID, Zeit und den veränderten
Dateien in zeitlicher Reihenfolge dargestellt. Die konkreten Veränderungen am
Inhalt der Dateien werden hier nicht dargestellt(siehe Abschnitt
\ref{sec:gitlog} auf Seite \pageref{sec:gitlog}).

\subsection{Objektmodell}
\subsection{Kommandos}\label{sec:commands}

\subsubsection{git add}\label{sec:gitadd}
Mit \texttt{git add} können Grundsätzlich Dateien hinzugefügt werden. Der
Befehl selbst bietet, wie fast alle Git Kommandos eine Vielzahl an
Optionen\footnote{Eine Übersicht über die unterstützden Optione kann mit den
uter Linux üblichem Methoden angezeigt werden. So z.B. mit \texttt{git <Befehl>
help} oder mit dem klassischen Aufruf der Manpage \texttt{man git <Befehl>}}.
Eine sei an dieser Stelle besonders erwähnt \texttt{git add -p}. Das
\texttt{-p} ermöglicht die durchgeführten Änderungen an den Dateien selektiv
hinzuzufügen. Das kann hilfreich sein um Änderungen an verschiedenen Teilen in
seperate \glspl{commit} aufzuteilen oder bestimmte Änderungen weg zulassen.

\subsubsection{git log}\label{sec:gitlog}
\subsubsection{git show}\label{sec:gitshow}
Git show gibt alle relevanten Informationen eines Commits aus.....S.25 gitosp

\section{Workflows}
\label{sec:Workflows}
\section{Fortgeschrittene Konzepte}
\label{sec:FortgeschritteneKonzepte}
\subsection{Regressionen und Bisektion}\label{sec:bisec}
\subsection{Rebase}\label{sec:rebase}
\subsection{Andere Versionsverwaltungssysteme und Git}
\label{sec:AndereVersionsverwaltungssystemeundGit}
